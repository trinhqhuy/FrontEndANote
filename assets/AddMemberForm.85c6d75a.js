import{r as p,S,u as h,a as M,c as y,l as w,s as N,j as x,b as a,o as E,p as I,h as _}from"./index.cec0d3ca.js";import{i as T}from"./index.f634ea7f.js";import"./0.7ca1fb7e.js";import"./1.7598f292.js";import"./2.9dca01e0.js";import"./3.13698d7c.js";import"./4.fe37f29d.js";import"./5.a86dd2dd.js";import"./6.9db38289.js";import"./7.068f5ee0.js";import"./8.cbc88f1c.js";import"./9.80e56bee.js";import"./10.b57d0967.js";const B=u=>{const{state:s,dispatch:r}=p.exports.useContext(S),o=h(n=>{var t;return(t=n.auth.login)==null?void 0:t.currentUser}),[l,d]=p.exports.useState(""),m=M();let i=y(o,m,w);return p.exports.useEffect(()=>{if(l!=""){const n={name:l,_idFolder:s.isFolder.id},t=setTimeout(()=>{N(o==null?void 0:o.accessToken,n,m,i).then(e=>{r({type:"isSearchedMember",payload:e.data}),r({type:"resSearch",payload:e.status})}).catch(e=>console.log(e))},2e3);return()=>clearTimeout(t)}},[l]),x("div",{className:"relative",children:[a("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:a("div",{className:"pr-2 border-r-2 border-[#0E6EFC] dark:border-gray-600",children:a("i",{className:"fa-solid fa-magnifying-glass text-[#0E6EFC] dark:text-white"})})}),a("input",{type:"search",id:"search",autoComplete:"off",value:l,onChange:n=>{d(n.target.value)},className:"block p-3 pl-16 w-full text-sm text-white bg-[#BFDBFE] rounded-lg placeholder-white dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-700 dark:text-white shadow-[2px_4px_20px_2px_#BFDBFE] dark:shadow-[2px_4px_20px_2px_#2a4582] focus-visible:outline-none",placeholder:"Add member"})]})};function v({id:u,idFolder:s,name:r,avatar:o,isIntived:l,isAdmin:d,isDelete:m}){const{state:i,dispatch:n}=p.exports.useContext(S),t=h(f=>{var b;return(b=f.auth.login)==null?void 0:b.currentUser}),e=M();let c=y(t,e,w);const k=async()=>{const f={idUser:u,idFolder:s,isIntive:!0,isActive:!1,isSeen:!1},b={name:r,_idFolder:s};await E(t==null?void 0:t.accessToken,f,e,c),await N(t==null?void 0:t.accessToken,b,e,c).then(g=>{n({type:"isSearchedMember",payload:g.data}),n({type:"resSearch",payload:g.status})}).catch(g=>console.log(g))},D=l===!0?"Intived":"Intive",F=m&&a("button",{type:"button",className:"w-16 h-7 bg-greatRed rounded-full text-white",onClick:()=>{I(t==null?void 0:t.accessToken,u,e,c).then(()=>{var f;return _(t==null?void 0:t.accessToken,(f=i.isFolder)==null?void 0:f.id,e,c)})},children:"Delete"}),C=d&&a("i",{className:"fa-solid fa-key text-yellow-400 text-xl"}),A=s&&a("button",{type:"button",disabled:l,onClick:k,className:"w-14 h-7 bg-greatBlue rounded-full text-white",children:D});return x("div",{className:"flex flex-row m-2 p-2 justify-between items-center",children:[x("div",{className:"flex flex-row items-center",children:[a("img",{className:"w-10 h-10 rounded-full",src:T[o],alt:""}),a("div",{className:"text-lg font-medium pl-2",children:r})]}),C,A,F]})}const j="/assets/ErrorImage.cfbf78fd.png";function U({title:u}){return x("div",{className:"flex flex-col p-5 justify-center items-center",children:[a("img",{className:"w-36",src:j,alt:""}),a("p",{className:"text-lg font-medium",children:u})]})}function J(){const{state:u,dispatch:s}=p.exports.useContext(S),r=h(e=>{var c;return(c=e.auth.login)==null?void 0:c.currentUser}),o=M();let l=y(r,o,w);const d=h(e=>{var c;return(c=e.members.members)==null?void 0:c.all});p.exports.useEffect(()=>{_(r==null?void 0:r.accessToken,u.isFolder.id,o,l)},[]);const m=d==null?void 0:d.filter(e=>!e.isAdmin),i=d==null?void 0:d.filter(e=>e.isAdmin),n=i==null?void 0:i.map(e=>a(v,{id:e.user[0]._id,name:e.user[0].username,avatar:e.user[0].avatar,isIntived:!1,isAdmin:!0,isDelete:!1},e.user[0]._id)),t=m==null?void 0:m.map(e=>a(v,{id:e._id,name:e.user[0].username,avatar:e.user[0].avatar,isIntived:!1,isDelete:i[0]._idUser===(r==null?void 0:r._id)},e.user[0]._id));return x("div",{className:"flex flex-col",children:[n,t]})}function Z(u){const{state:s,dispatch:r}=p.exports.useContext(S),o=h(i=>{var n;return(n=i.auth.login)==null?void 0:n.currentUser}),l=M(),[d,m]=p.exports.useState("");return y(o,l,w),h(i=>i.user.users),h(i=>i.user.users.message.message),x("form",{className:"p-5",children:[a(B,{isSearch:m}),a(J,{}),s.isSearchedMember!=null?s.isSearchedMember.intive==null?a(v,{id:s.isSearchedMember._id,name:s.isSearchedMember.username,idFolder:s.isFolder.id,avatar:s.isSearchedMember.avatar,isIntived:!1}):a(v,{id:s.isSearchedMember._id,name:s.isSearchedMember.username,idFolder:s.isFolder.id,avatar:s.isSearchedMember.avatar,isIntived:!0}):s.resSearch===400&&a(U,{title:"Can't found this user"})]})}export{Z as default};
